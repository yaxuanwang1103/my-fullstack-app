# ğŸš€ CI/CD å¿«é€Ÿé…ç½®æŒ‡å—

## âœ… å·²å®Œæˆçš„å·¥ä½œ

æˆ‘å·²ç»ä¸ºä½ åˆ›å»ºäº†ä»¥ä¸‹æ–‡ä»¶ï¼š

```
.github/workflows/
â”œâ”€â”€ ci.yml              # æŒç»­é›†æˆï¼ˆä»£ç æ£€æŸ¥ã€æ„å»ºã€æµ‹è¯•ï¼‰
â”œâ”€â”€ docker-build.yml    # Docker é•œåƒæ„å»ºå’Œæ¨é€
â”œâ”€â”€ deploy.yml          # è‡ªåŠ¨éƒ¨ç½²åˆ°æœåŠ¡å™¨
â””â”€â”€ release.yml         # è‡ªåŠ¨åˆ›å»º GitHub Release
```

---

## ğŸ“‹ é…ç½®æ­¥éª¤

### æ­¥éª¤ 1ï¼šé…ç½® GitHub Secretsï¼ˆå¿…éœ€ï¼‰

1. æ‰“å¼€ä½ çš„ GitHub ä»“åº“
2. ç‚¹å‡» **Settings** â†’ **Secrets and variables** â†’ **Actions**
3. ç‚¹å‡» **New repository secret**
4. æ·»åŠ ä»¥ä¸‹å¯†é’¥ï¼š

#### Docker Hub é…ç½®ï¼ˆç”¨äºé•œåƒæ¨é€ï¼‰

| åç§° | è¯´æ˜ | å¦‚ä½•è·å– |
|------|------|----------|
| `DOCKER_USERNAME` | Docker Hub ç”¨æˆ·å | ä½ çš„ Docker Hub ç”¨æˆ·å |
| `DOCKER_PASSWORD` | Docker Hub è®¿é—®ä»¤ç‰Œ | 1. ç™»å½• [Docker Hub](https://hub.docker.com/)<br>2. Account Settings â†’ Security<br>3. New Access Token<br>4. å¤åˆ¶ç”Ÿæˆçš„ token |

#### æœåŠ¡å™¨é…ç½®ï¼ˆç”¨äºè‡ªåŠ¨éƒ¨ç½²ï¼Œå¯é€‰ï¼‰

| åç§° | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| `SERVER_HOST` | æœåŠ¡å™¨ IP åœ°å€ | `123.45.67.89` |
| `SERVER_USER` | SSH ç”¨æˆ·å | `ubuntu` æˆ– `root` |
| `SERVER_SSH_KEY` | SSH ç§é’¥ | å®Œæ•´çš„ç§é’¥å†…å®¹ |
| `SERVER_PORT` | SSH ç«¯å£ï¼ˆå¯é€‰ï¼‰ | `22`ï¼ˆé»˜è®¤ï¼‰ |

#### å¦‚ä½•è·å– SSH ç§é’¥ï¼Ÿ

```powershell
# åœ¨æœ¬åœ°ç”Ÿæˆ SSH å¯†é’¥å¯¹ï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰
ssh-keygen -t rsa -b 4096 -C "your_email@example.com"

# æŸ¥çœ‹ç§é’¥å†…å®¹
cat ~/.ssh/id_rsa

# å°†å…¬é’¥æ·»åŠ åˆ°æœåŠ¡å™¨
ssh-copy-id user@server-ip
```

---

### æ­¥éª¤ 2ï¼šæ¨é€å·¥ä½œæµæ–‡ä»¶åˆ° GitHub

```powershell
# è¿›å…¥é¡¹ç›®ç›®å½•
cd C:\Users\95150\OneDrive\æ¡Œé¢\my-fullstack-app

# æŸ¥çœ‹æ–°å¢çš„æ–‡ä»¶
git status

# æ·»åŠ å·¥ä½œæµæ–‡ä»¶
git add .github/

# æäº¤
git commit -m "feat: æ·»åŠ  CI/CD å·¥ä½œæµé…ç½®

- æ·»åŠ æŒç»­é›†æˆå·¥ä½œæµï¼ˆä»£ç æ£€æŸ¥ã€æ„å»ºã€æµ‹è¯•ï¼‰
- æ·»åŠ  Docker é•œåƒæ„å»ºå’Œæ¨é€å·¥ä½œæµ
- æ·»åŠ è‡ªåŠ¨éƒ¨ç½²å·¥ä½œæµ
- æ·»åŠ è‡ªåŠ¨å‘å¸ƒå·¥ä½œæµ"

# æ¨é€åˆ° GitHub
git push origin main
```

---

### æ­¥éª¤ 3ï¼šæŸ¥çœ‹å·¥ä½œæµè¿è¡Œ

1. æ‰“å¼€ä½ çš„ GitHub ä»“åº“
2. ç‚¹å‡» **Actions** æ ‡ç­¾
3. ä½ ä¼šçœ‹åˆ°å·¥ä½œæµå¼€å§‹è¿è¡Œ

![GitHub Actions](https://docs.github.com/assets/cb-27347/images/help/repository/actions-tab.png)

---

## ğŸ¯ å·¥ä½œæµè¯´æ˜

### 1. CI - æŒç»­é›†æˆ (`ci.yml`)

**è§¦å‘æ¡ä»¶**ï¼š
- æ¨é€ä»£ç åˆ° `main` æˆ– `develop` åˆ†æ”¯
- åˆ›å»º Pull Request

**æ‰§è¡Œå†…å®¹**ï¼š
- âœ… ä»£ç æ ¼å¼æ£€æŸ¥
- âœ… å‰ç«¯æ„å»ºæµ‹è¯•
- âœ… åç«¯è¯­æ³•æ£€æŸ¥
- âœ… Docker é•œåƒæ„å»ºæµ‹è¯•

**é¢„æœŸæ—¶é—´**ï¼š3-5 åˆ†é’Ÿ

**æŸ¥çœ‹æ–¹å¼**ï¼š
```
GitHub â†’ Actions â†’ CI - æŒç»­é›†æˆ
```

---

### 2. Docker Build - é•œåƒæ„å»º (`docker-build.yml`)

**è§¦å‘æ¡ä»¶**ï¼š
- æ¨é€ä»£ç åˆ° `main` åˆ†æ”¯
- åˆ›å»ºç‰ˆæœ¬æ ‡ç­¾ï¼ˆå¦‚ `v2.1.1`ï¼‰
- æ‰‹åŠ¨è§¦å‘

**æ‰§è¡Œå†…å®¹**ï¼š
- ğŸ³ æ„å»º frontendã€backend-aã€backend-b ä¸‰ä¸ªé•œåƒ
- ğŸ“¤ æ¨é€åˆ° Docker Hub
- ğŸ·ï¸ è‡ªåŠ¨æ‰“æ ‡ç­¾ï¼ˆlatestã€ç‰ˆæœ¬å·ã€åˆ†æ”¯åï¼‰

**é¢„æœŸæ—¶é—´**ï¼š5-10 åˆ†é’Ÿ

**æ³¨æ„**ï¼šéœ€è¦é…ç½® `DOCKER_USERNAME` å’Œ `DOCKER_PASSWORD`

---

### 3. Deploy - è‡ªåŠ¨éƒ¨ç½² (`deploy.yml`)

**è§¦å‘æ¡ä»¶**ï¼š
- åˆ›å»ºç‰ˆæœ¬æ ‡ç­¾ï¼ˆå¦‚ `v2.1.1`ï¼‰
- æ‰‹åŠ¨è§¦å‘

**æ‰§è¡Œå†…å®¹**ï¼š
- ğŸš€ SSH è¿æ¥åˆ°æœåŠ¡å™¨
- ğŸ“¥ æ‹‰å–æœ€æ–°ä»£ç 
- ğŸ³ æ‹‰å–æœ€æ–°é•œåƒ
- â–¶ï¸ é‡å¯å®¹å™¨
- ğŸ” å¥åº·æ£€æŸ¥

**é¢„æœŸæ—¶é—´**ï¼š2-3 åˆ†é’Ÿ

**æ³¨æ„**ï¼šéœ€è¦é…ç½®æœåŠ¡å™¨ç›¸å…³çš„ Secrets

---

### 4. Release - è‡ªåŠ¨å‘å¸ƒ (`release.yml`)

**è§¦å‘æ¡ä»¶**ï¼š
- åˆ›å»ºç‰ˆæœ¬æ ‡ç­¾ï¼ˆå¦‚ `v2.1.1`ï¼‰

**æ‰§è¡Œå†…å®¹**ï¼š
- ğŸ“ ä» CHANGELOG.md æå–æ›´æ–°å†…å®¹
- ğŸ‰ åˆ›å»º GitHub Release
- ğŸ“ é™„åŠ ç›¸å…³æ–‡ä»¶

**é¢„æœŸæ—¶é—´**ï¼š1 åˆ†é’Ÿ

---

## ğŸ§ª æµ‹è¯•å·¥ä½œæµ

### æµ‹è¯• CI å·¥ä½œæµ

```powershell
# ä¿®æ”¹ä¸€ä¸ªæ–‡ä»¶
echo "# Test" >> README.md

# æäº¤å¹¶æ¨é€
git add README.md
git commit -m "test: æµ‹è¯• CI å·¥ä½œæµ"
git push origin main
```

ç„¶ååœ¨ GitHub Actions ä¸­æŸ¥çœ‹è¿è¡Œç»“æœã€‚

---

### æµ‹è¯• Docker æ„å»ºï¼ˆéœ€è¦å…ˆé…ç½® Secretsï¼‰

```powershell
# æ¨é€åˆ° main åˆ†æ”¯ä¼šè‡ªåŠ¨è§¦å‘
git push origin main

# æˆ–è€…æ‰‹åŠ¨è§¦å‘
# GitHub â†’ Actions â†’ Docker - æ„å»ºå¹¶æ¨é€é•œåƒ â†’ Run workflow
```

---

### æµ‹è¯•å‘å¸ƒæµç¨‹

```powershell
# åˆ›å»ºç‰ˆæœ¬æ ‡ç­¾
git tag -a v2.1.2 -m "æµ‹è¯•ç‰ˆæœ¬ 2.1.2"
git push origin v2.1.2
```

è¿™ä¼šè§¦å‘ï¼š
1. Docker é•œåƒæ„å»º
2. è‡ªåŠ¨éƒ¨ç½²ï¼ˆå¦‚æœé…ç½®äº†ï¼‰
3. åˆ›å»º GitHub Release

---

## ğŸ“Š å·¥ä½œæµçŠ¶æ€å¾½ç« 

åœ¨ README.md ä¸­æ·»åŠ çŠ¶æ€å¾½ç« ï¼š

```markdown
![CI](https://github.com/ä½ çš„ç”¨æˆ·å/my-fullstack-app/workflows/CI%20-%20æŒç»­é›†æˆ/badge.svg)
![Docker](https://github.com/ä½ çš„ç”¨æˆ·å/my-fullstack-app/workflows/Docker%20-%20æ„å»ºå¹¶æ¨é€é•œåƒ/badge.svg)
```

---

## ğŸ”§ è‡ªå®šä¹‰é…ç½®

### ä¿®æ”¹è§¦å‘æ¡ä»¶

ç¼–è¾‘ `.github/workflows/ci.yml`ï¼š

```yaml
on:
  push:
    branches: [main, develop, feature/*]  # æ·»åŠ æ›´å¤šåˆ†æ”¯
  pull_request:
    branches: [main]
  schedule:
    - cron: '0 0 * * *'  # æ¯å¤©åˆå¤œè¿è¡Œ
```

---

### æ·»åŠ ç¯å¢ƒå˜é‡

```yaml
env:
  NODE_VERSION: '20'
  DOCKER_REGISTRY: docker.io
```

---

### è·³è¿‡ CI

åœ¨æäº¤ä¿¡æ¯ä¸­æ·»åŠ ï¼š

```powershell
git commit -m "docs: æ›´æ–°æ–‡æ¡£ [skip ci]"
```

---

## âš ï¸ å¸¸è§é—®é¢˜

### Q1: å·¥ä½œæµæ²¡æœ‰è¿è¡Œï¼Ÿ

**æ£€æŸ¥**ï¼š
1. `.github/workflows/` ç›®å½•æ˜¯å¦å­˜åœ¨
2. YAML æ–‡ä»¶æ ¼å¼æ˜¯å¦æ­£ç¡®
3. è§¦å‘æ¡ä»¶æ˜¯å¦æ»¡è¶³

---

### Q2: Docker æ„å»ºå¤±è´¥ï¼Ÿ

**åŸå› **ï¼š
- æ²¡æœ‰é…ç½® `DOCKER_USERNAME` å’Œ `DOCKER_PASSWORD`
- Docker Hub ç™»å½•å¤±è´¥
- Dockerfile æœ‰é”™è¯¯

**è§£å†³**ï¼š
1. æ£€æŸ¥ Secrets é…ç½®
2. æœ¬åœ°æµ‹è¯• Docker æ„å»º
3. æŸ¥çœ‹è¯¦ç»†é”™è¯¯æ—¥å¿—

---

### Q3: éƒ¨ç½²å¤±è´¥ï¼Ÿ

**åŸå› **ï¼š
- æœåŠ¡å™¨ SSH é…ç½®é”™è¯¯
- æœåŠ¡å™¨è·¯å¾„ä¸å­˜åœ¨
- æƒé™ä¸è¶³

**è§£å†³**ï¼š
1. æµ‹è¯• SSH è¿æ¥
2. æ£€æŸ¥æœåŠ¡å™¨è·¯å¾„
3. ç¡®è®¤ç”¨æˆ·æƒé™

---

### Q4: å¦‚ä½•æŸ¥çœ‹è¯¦ç»†æ—¥å¿—ï¼Ÿ

1. GitHub â†’ Actions
2. ç‚¹å‡»å…·ä½“çš„å·¥ä½œæµè¿è¡Œ
3. ç‚¹å‡»å¤±è´¥çš„ä»»åŠ¡
4. å±•å¼€æ­¥éª¤æŸ¥çœ‹è¯¦ç»†æ—¥å¿—

---

## ğŸ“š ä¸‹ä¸€æ­¥å­¦ä¹ 

### åˆçº§
- âœ… ç†è§£ CI/CD åŸºæœ¬æ¦‚å¿µ
- âœ… é…ç½®åŸºç¡€å·¥ä½œæµ
- â³ æ·»åŠ è‡ªåŠ¨åŒ–æµ‹è¯•

### ä¸­çº§
- â³ å¤šç¯å¢ƒéƒ¨ç½²ï¼ˆdev/staging/prodï¼‰
- â³ æ·»åŠ ä»£ç è´¨é‡æ£€æŸ¥ï¼ˆESLintã€Prettierï¼‰
- â³ é…ç½®ç¼“å­˜ä¼˜åŒ–æ„å»ºé€Ÿåº¦

### é«˜çº§
- â³ è‡ªå®šä¹‰ GitHub Actions
- â³ çŸ©é˜µæ„å»ºï¼ˆå¤šç‰ˆæœ¬ã€å¤šå¹³å°ï¼‰
- â³ é›†æˆç¬¬ä¸‰æ–¹æœåŠ¡ï¼ˆSlack é€šçŸ¥ã€æ€§èƒ½ç›‘æ§ï¼‰

---

## ğŸ“ å­¦ä¹ èµ„æº

### å®˜æ–¹æ–‡æ¡£
- [GitHub Actions æ–‡æ¡£](https://docs.github.com/en/actions)
- [å·¥ä½œæµè¯­æ³•](https://docs.github.com/en/actions/reference/workflow-syntax-for-github-actions)

### è§†é¢‘æ•™ç¨‹
- [GitHub Actions å¿«é€Ÿå…¥é—¨](https://www.youtube.com/watch?v=R8_veQiYBjI)
- [CI/CD æœ€ä½³å®è·µ](https://www.youtube.com/watch?v=scEDHsr3APg)

### ç¤ºä¾‹é¡¹ç›®
- [actions/starter-workflows](https://github.com/actions/starter-workflows)
- [awesome-actions](https://github.com/sdras/awesome-actions)

---

## âœ… æ£€æŸ¥æ¸…å•

é…ç½®å®Œæˆåï¼Œç¡®è®¤ä»¥ä¸‹å†…å®¹ï¼š

- [ ] GitHub Secrets å·²é…ç½®
- [ ] å·¥ä½œæµæ–‡ä»¶å·²æ¨é€åˆ° GitHub
- [ ] CI å·¥ä½œæµè¿è¡ŒæˆåŠŸ
- [ ] Docker é•œåƒæ„å»ºæˆåŠŸï¼ˆå¦‚æœé…ç½®äº†ï¼‰
- [ ] ç†è§£æ¯ä¸ªå·¥ä½œæµçš„ä½œç”¨
- [ ] çŸ¥é“å¦‚ä½•æŸ¥çœ‹æ—¥å¿—å’Œè°ƒè¯•

---

## ğŸ‰ æ­å–œï¼

ä½ å·²ç»æˆåŠŸé…ç½®äº† CI/CDï¼

ç°åœ¨æ¯æ¬¡æ¨é€ä»£ç ï¼ŒGitHub Actions éƒ½ä¼šè‡ªåŠ¨ï¼š
- âœ… æ£€æŸ¥ä»£ç è´¨é‡
- âœ… æ„å»ºå’Œæµ‹è¯•
- âœ… æ„å»º Docker é•œåƒ
- âœ… è‡ªåŠ¨éƒ¨ç½²ï¼ˆå¦‚æœé…ç½®äº†ï¼‰

ç»§ç»­å­¦ä¹ ï¼Œä¸æ–­ä¼˜åŒ–ä½ çš„ CI/CD æµç¨‹ï¼ğŸš€
